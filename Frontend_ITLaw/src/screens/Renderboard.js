import React, { useState, useEffect } from "react";
import "../App.css";
import axios from "axios";
import moment from "moment";
import _ from "lodash";

const Renderboard = () => {
  const [datauser, setDatauser] = useState([]);
  const renderdata = () => {
    return datauser.map((data, index) => {
      return (
        <tr>
          <td className="font-mitr pr-5" style={{ textAlign: "center", color: "white"}} scope="row">{index + 1}</td>
          <td className="font-mitr" style={{ textAlign: "left", color: "white"}}>
            <img
              src={data.imageuser}
              style={{ height: "60px", width: "60px;", borderRadius: 50 }}
            />
            &nbsp;&nbsp;&nbsp;&nbsp;{data.name}
          </td>
          <td className="font-mitr" style={{ textAlign: "center", color: "white"}}>
            {moment(data.updatedAt).calendar()}
          </td>
          <td className="font-mitr" style={{ textAlign: "center", color: "white"}}>{data.score}</td>
        </tr>
      );
    });
  };

  const getDatauser = () => {
    axios
      .get("https://serveritlaw.herokuapp.com/renderboard")
      .then((res) => {
        setDatauser(_.sortBy(res.data, ["score"]).reverse());
      })
      .catch((er) => console.log(er.message));
  };
  useEffect(() => {
    getDatauser();
  }, []);

  return (
    <div className="container" style={{ marginTop: 150, marginBottom:50 }}>
      <p className="display-4 font-weight-light py-3 text-center font-mitr">Leaderboard</p>
      <p className="h4 font-weight-light py-3">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Iure dicta
        quasi similique mollitia fuga odio, ut aperiam minus dolorem blanditiis
        suscipit esse beatae itaque, aliquid adipisci. Repudiandae quidem
        impedit recusandae.
      </p>
      <hr />
      <div className="row d-flex justify-content-center">
        <div
          className="card cardstyle mx-5 p-2 mt-5"
          style={{ width: "15rem" }}
        >
          <div className="d-flex justify-content-center mt-3">
            <img
              className="card-img-top"
              src="https://picsum.photos/50/50"
              alt="Card image cap"
            />
          </div>
          <div className="card-body text-center">
            <h5 className="card-title">Name2</h5>
            <h5 className="card-title font-weight-normal">Score</h5>
            <h5 className="card-title font-weight-light">Date</h5>
            <p className="card-text">
              <img
                src="https://www.flaticon.com/svg/static/icons/svg/2583/2583319.svg"
                className="img-thumbnail border-0"
                style={{ height: "40%", width: "40%" }}
              />
            </p>
          </div>
        </div>

        <div className="card cardstyle m-3 p-2" style={{ width: "15rem" }}>
          <div className="d-flex justify-content-center mt-4">
            <img
              className="card-img-top"
              src="https://picsum.photos/50/50"
              alt="Card image cap"
            />
          </div>
          <div className="card-body text-center">
            <h5 className="card-title">Name1</h5>
            <h5 className="card-title font-weight-normal">Score</h5>
            <h5 className="card-title font-weight-light">Date</h5>
            <p className="card-text">
              <img
                src="https://www.flaticon.com/svg/static/icons/svg/2583/2583344.svg"
                className="img-thumbnail border-0"
                style={{ height: "40%", width: "40%" }}
              />
            </p>
          </div>
        </div>
        <div
          className="card cardstyle mx-5 p-2 mt-5"
          style={{ width: "15rem" }}
        >
          <div className="d-flex justify-content-center mt-3">
            <img
              className="card-img-top"
              src="https://picsum.photos/50/50"
              alt="Card image cap"
            />
          </div>
          <div className="card-body text-center">
            <h5 className="card-title">Name3</h5>
            <h5 className="card-title font-weight-normal">Score</h5>
            <h5 className="card-title font-weight-light">Date</h5>
            <p className="card-text">
              <img
                src="https://www.flaticon.com/svg/static/icons/svg/2583/2583434.svg"
                className="img-thumbnail border-0"
                style={{ height: "40%", width: "40%" }}
              />
            </p>
          </div>
        </div>
      </div>

      <div class="cardtable p-5 mt-5">
      <h1 className="text-center font-mitr text-white">Total Participant</h1>
      <hr/>
        <table style={{width:"100%"}}>
          {renderdata()}
        </table>
      </div>
    </div>
  );
};

export default Renderboard;
