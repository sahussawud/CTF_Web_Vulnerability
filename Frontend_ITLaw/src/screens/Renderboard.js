import React, {useState, useEffect} from 'react'
import '../App.css';
import axios from 'axios';
import moment from 'moment'
import _ from "lodash";

const Renderboard = () =>{
    const [datauser, setDatauser] = useState([])
    const renderdata = () =>{
        return datauser.map((data, index) => {
            return(
                    <tr>
                        <th scope="row">{index+1}</th>
                        <td style={{textAlign:'center'}}>
                            <img src={data.imageuser} style={{height: '50px', width: '50px;'}} />
                            &nbsp;&nbsp;&nbsp;&nbsp;{data.name}
                        </td>
                        <td style={{textAlign:'center'}}>{moment(data.updatedAt).calendar()}</td>
                        <td style={{textAlign:'center'}}>{data.score}</td>
                    </tr>
            )
        })
    }

    const getDatauser = () =>{
        axios.get('https://serveritlaw.herokuapp.com/renderboard')
        .then((res) => {
            setDatauser((_.sortBy(res.data, ['score'])).reverse())
        })
        .catch((er) => console.log(er.message))
    } 
    useEffect(() =>{
        getDatauser()
    }, [])

    

    return(
        <div className="container" style={{marginTop: 20}}>
            <p className="h2 font-weight-light py-3">Leaderboard</p>
            <p className="h4 font-weight-light py-3">Lorem ipsum dolor sit amet consectetur adipisicing elit. Iure dicta quasi
                similique mollitia fuga odio, ut aperiam minus dolorem blanditiis suscipit esse beatae itaque, aliquid
                adipisci. Repudiandae quidem impedit recusandae.</p>
            <hr />
            <table className="table table-hover">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col" style={{textAlign:'center'}}>User</th>
                        <th scope="col" style={{textAlign:'center'}}>Date</th>
                        <th scope="col" style={{textAlign:'center'}}>Score</th>
                    </tr>
                    {renderdata()}
                </thead>
                <tbody>
                    
                </tbody>
            </table>
    </div>
    )
}

export default Renderboard